{
  "post_stream": {
    "posts": [
      {
        "id": 257169,
        "name": "",
        "username": "mistake",
        "avatar_template": "/letter_avatar_proxy/v4/letter/m/a9a28c/{size}.png",
        "created_at": "2024-12-13T14:47:48.325Z",
        "cooked": "<p>Hi, I want to talk about a specific threat model:</p>\n<ul>\n<li>The police confiscates a device with Signal installed</li>\n<li>They manage to open the database</li>\n<li>They see phone numbers of old contacts</li>\n<li>They see UUIDs of contacts which have only be added after <a href=\"https://signal.org/blog/phone-number-privacy-usernames/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Signal &gt;&gt; Blog &gt;&gt; Keep your phone number private with Signal usernames</a></li>\n<li>They subpoena Signal to give out the phone numbers related to the UUIDs in the confiscated Signal database</li>\n</ul>\n<p>Would Signal be able to give the police phone numbers or hashed phone numbers? And if yes, could they be forced to give them out?</p>\n<p>Background: if you use <a href=\"https://github.com/tbvdm/sigtop\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">GitHub - tbvdm/sigtop: Export messages from Signal Desktop</a> to export messages from the Signal Desktop client, you see output files like this:</p>\n<pre><code class=\"lang-auto\">'Alice (+4916291827367).txt'\n'Bob (72878c2e-1ac9-49f0-2130-2b731ee1da94).txt'\n</code></pre>\n<p>‚ÄúAlice‚Äù is a contact I‚Äôve known for longer, so I added her via her phone number. ‚ÄúBob‚Äù is a contact I‚Äôve added via username later, I‚Äôve never known his phone number.</p>\n<p>Now I wonder what this UUID is we are seeing at Bob - but obviously Signal needs some account identifier so it can deliver my messages to Bob. Couldn‚Äôt this account identifier be used to subpoena Signal for Bob‚Äôs phone number?</p>\n<p>According to <a href=\"https://signal.org/bigbrother/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">Signal &gt;&gt; Government Communication</a> they were never asked for phone numbers, the police so far already knew them.</p>\n<p>And then there is <a href=\"https://web.archive.org/web/20240408134149/https://theintercept.com/2024/03/04/signal-app-username-phone-number-privacy/\" class=\"inline-onebox\" rel=\"noopener nofollow ugc\">New Signal Usernames Help Stymie Subpoenas, Data Priavacy</a> which suggests that Signal usernames are at least somewhat protected by Intel SGX - but it doesn‚Äôt talk about the phone numbers. Can it even protect the phone number during delivery? afaiu it can only protect the username because a client is logged in which already knows it; but a client which wants to deliver a message doesn‚Äôt even know the phone number; therefore I gather that Intel SGX doesn‚Äôt help here?</p>\n<p>I couldn‚Äôt find any more concrete documentation on this, so if someone could shed light on this it would be great.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-12-13T14:47:48.325Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 5,
        "reads": 59,
        "readers_count": 58,
        "score": 51.8,
        "yours": false,
        "topic_id": 65447,
        "topic_slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/tbvdm/sigtop",
            "internal": false,
            "reflection": false,
            "title": "GitHub - tbvdm/sigtop: Export messages from Signal Desktop",
            "clicks": 3
          },
          {
            "url": "https://web.archive.org/web/20240408134149/https://theintercept.com/2024/03/04/signal-app-username-phone-number-privacy/",
            "internal": false,
            "reflection": false,
            "title": "New Signal Usernames Help Stymie Subpoenas, Data Priavacy",
            "clicks": 1
          },
          {
            "url": "https://signal.org/bigbrother/",
            "internal": false,
            "reflection": false,
            "title": "Signal >> Government Communication",
            "clicks": 1
          },
          {
            "url": "https://signal.org/blog/phone-number-privacy-usernames/",
            "internal": false,
            "reflection": false,
            "title": "Signal >> Blog >> Keep your phone number private with Signal usernames",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 31027,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena/65447/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true,
        "can_vote": false
      },
      {
        "id": 257174,
        "name": "kara",
        "username": "kara42",
        "avatar_template": "/letter_avatar_proxy/v4/letter/k/7993a0/{size}.png",
        "created_at": "2024-12-13T16:18:51.650Z",
        "cooked": "<p>Hi <a class=\"mention\" href=\"/u/mistake\">@mistake</a> , welcome to the forum!<br>\nMy understanding is, that Signal could (technically) in fact be forced to hand out the phone number for a given username.</p>\n<p>How I understood things so far (please someone correct me if I‚Äôm wrong):<br>\nFor every account, the server stores a PNI (basically your phone number) and ACI (account ID), the server can link them bidirectional.<br>\nAlso for every username, the server knows a mapping of a hash of the username to the ACI. The server never gets to the the plaintext username.<br>\nTo lookup a username, the client sends the username hash to the server and receives the ACI of the user. That would be the ID of Bob in your example.</p>\n<p>I think with regard to your question SGX is not relevant, as it plays a role in account recovery flow and contact discovery service for phone numbers, but not for the ACI&lt;-&gt;PNI part.</p>",
        "post_number": 4,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-12-13T16:20:52.362Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 56,
        "readers_count": 55,
        "score": 46.2,
        "yours": false,
        "topic_id": 65447,
        "topic_slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
        "display_username": "kara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8599,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena/65447/4",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true
      },
      {
        "id": 257175,
        "name": "",
        "username": "mistake",
        "avatar_template": "/letter_avatar_proxy/v4/letter/m/a9a28c/{size}.png",
        "created_at": "2024-12-13T16:30:18.474Z",
        "cooked": "<aside class=\"quote no-group\" data-username=\"kara42\" data-post=\"4\" data-topic=\"65447\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://community.signalusers.org/letter_avatar_proxy/v4/letter/k/7993a0/48.png\" class=\"avatar\"> kara42:</div>\n<blockquote>\n<p>My understanding is, that Signal could (technically) in fact be forced to hand out the phone number for a given username.</p>\n</blockquote>\n</aside>\n<p>That‚Äôs to be expected - if the username is still set. I do think that if you change a username, a past username could not be tied to an account by Signal being subpoenaed.</p>\n<p>But after seizing my device, LE wouldn‚Äôt even know Bob‚Äôs username - I only needed it for the contact discovery after all, after that I assume it is forgotten, as the contact is established now.</p>",
        "post_number": 5,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-12-13T16:30:18.474Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 54,
        "readers_count": 53,
        "score": 10.8,
        "yours": false,
        "topic_id": 65447,
        "topic_slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 31027,
        "hidden": false,
        "trust_level": 0,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena/65447/5",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true
      },
      {
        "id": 257177,
        "name": "kara",
        "username": "kara42",
        "avatar_template": "/letter_avatar_proxy/v4/letter/k/7993a0/{size}.png",
        "created_at": "2024-12-13T16:48:30.196Z",
        "cooked": "<p><a class=\"mention\" href=\"/u/mistake\">@mistake</a> you are right, after being deleted the username should be useless. But if you already looked up the ACI using the username and your device gets compromised, the attacker will learn the ACI. And that would be enough for Signal (if forced) to find out your PNI/phone number.</p>",
        "post_number": 6,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-12-13T16:48:30.196Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 54,
        "readers_count": 53,
        "score": 55.8,
        "yours": false,
        "topic_id": 65447,
        "topic_slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
        "display_username": "kara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 3
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8599,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena/65447/6",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": true,
        "topic_accepted_answer": true
      },
      {
        "id": 257182,
        "name": null,
        "username": "QuickBanana",
        "avatar_template": "/user_avatar/community.signalusers.org/quickbanana/{size}/35290_2.png",
        "created_at": "2024-12-13T17:29:57.546Z",
        "cooked": "<aside class=\"quote no-group quote-modified\" data-username=\"Avitus\" data-post=\"3\" data-topic=\"65447\">\n<div class=\"title\">\n<div class=\"quote-controls\"></div>\n<img loading=\"lazy\" alt=\"\" width=\"24\" height=\"24\" src=\"https://community.signalusers.org/user_avatar/community.signalusers.org/avitus/48/34172_2.png\" class=\"avatar\"> Avitus:</div>\n<blockquote>\n<p>Even if law enforcement knew Bob was tied to a UUID, Signal would not. The data you exported from Signal Desktop is stored locally. So LE would have to seize Bob‚Äôs computer to produce any real evidence that Bob was involved in whatever crime they‚Äôre suspecting.</p>\n</blockquote>\n</aside>\n<p>This is not relevant to the question, the question is also the other way around, i.e. tie UUID to the account, which I believe is true as Signal has to know the connection between UUID and accounts since you can send a message to someone just using the UUID (not with the official apps though).</p>",
        "post_number": 7,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2024-12-13T17:29:57.546Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 1,
        "incoming_link_count": 0,
        "reads": 53,
        "readers_count": 52,
        "score": 25.6,
        "yours": false,
        "topic_id": 65447,
        "topic_slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
        "display_username": null,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 1
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 16653,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena/65447/7",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true
      },
      {
        "id": 258688,
        "name": "kara",
        "username": "kara42",
        "avatar_template": "/letter_avatar_proxy/v4/letter/k/7993a0/{size}.png",
        "created_at": "2025-01-11T22:31:03.885Z",
        "cooked": "<p>Hi, although the question is already answered I would like to provide some pointers to the actual code for reference:</p>\n<p>This server code shows that given a username the server allows you to look up the ACI of the associated account:</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java#L389\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java#L389\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java#L389\" target=\"_blank\" rel=\"noopener\">signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java#L389</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-java\">\n      <ol class=\"start lines\" start=\"379\" style=\"counter-reset: li-counter 378 ;\">\n          <li>  try {</li>\n          <li>    hash = Base64.getUrlDecoder().decode(usernameHash);</li>\n          <li>  } catch (IllegalArgumentException | AssertionError e) {</li>\n          <li>    throw new WebApplicationException(Response.status(422).build());</li>\n          <li>  }</li>\n          <li></li>\n          <li>  if (hash.length != USERNAME_HASH_LENGTH) {</li>\n          <li>    throw new WebApplicationException(Response.status(422).build());</li>\n          <li>  }</li>\n          <li></li>\n          <li class=\"selected\">  return accounts.getByUsernameHash(hash).thenApply(maybeAccount -&gt; maybeAccount.map(Account::getUuid)</li>\n          <li>      .map(AciServiceIdentifier::new)</li>\n          <li>      .map(AccountIdentifierResponse::new)</li>\n          <li>      .orElseThrow(() -&gt; new WebApplicationException(Status.NOT_FOUND)));</li>\n          <li>}</li>\n          <li></li>\n          <li>@PUT</li>\n          <li>@Path(\"/username_link\")</li>\n          <li>@Produces(MediaType.APPLICATION_JSON)</li>\n          <li>@Consumes(MediaType.APPLICATION_JSON)</li>\n          <li>@Operation(</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Here you can see the Signal server stores the ACI, PNI and phone number in the same java class, which makes them linkable (for the server) in all ‚Äúdirections‚Äù</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L47\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L47\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L47\" target=\"_blank\" rel=\"noopener\">signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L47</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-java\">\n      <ol class=\"start lines\" start=\"37\" style=\"counter-reset: li-counter 36 ;\">\n          <li></li>\n          <li>private static final Logger logger = LoggerFactory.getLogger(Account.class);</li>\n          <li></li>\n          <li>@JsonProperty</li>\n          <li>private UUID uuid;</li>\n          <li></li>\n          <li>@JsonProperty(\"pni\")</li>\n          <li>private UUID phoneNumberIdentifier;</li>\n          <li></li>\n          <li>@JsonProperty</li>\n          <li class=\"selected\">private String number;</li>\n          <li></li>\n          <li>@JsonProperty</li>\n          <li>@JsonSerialize(using = ByteArrayBase64UrlAdapter.Serializing.class)</li>\n          <li>@JsonDeserialize(using = ByteArrayBase64UrlAdapter.Deserializing.class)</li>\n          <li>@Nullable</li>\n          <li>private byte[] usernameHash;</li>\n          <li></li>\n          <li>@JsonProperty</li>\n          <li>@JsonSerialize(using = ByteArrayBase64UrlAdapter.Serializing.class)</li>\n          <li>@JsonDeserialize(using = ByteArrayBase64UrlAdapter.Deserializing.class)</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>Inside the same class, the discoverability by phone number flag is stored</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L101\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L101\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L101\" target=\"_blank\" rel=\"noopener\">signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L101</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-java\">\n      <ol class=\"start lines\" start=\"91\" style=\"counter-reset: li-counter 90 ;\">\n          <li>@JsonProperty</li>\n          <li>private String registrationLockSalt;</li>\n          <li></li>\n          <li>@JsonProperty(\"uak\")</li>\n          <li>private byte[] unidentifiedAccessKey;</li>\n          <li></li>\n          <li>@JsonProperty(\"uua\")</li>\n          <li>private boolean unrestrictedUnidentifiedAccess;</li>\n          <li></li>\n          <li>@JsonProperty(\"inCds\")</li>\n          <li class=\"selected\">private boolean discoverableByPhoneNumber = true;</li>\n          <li></li>\n          <li>@JsonProperty(\"bcr\")</li>\n          <li>@Nullable</li>\n          <li>private byte[] messagesBackupCredentialRequest;</li>\n          <li></li>\n          <li>@JsonProperty(\"mbcr\")</li>\n          <li>@Nullable</li>\n          <li>private byte[] mediaBackupCredentialRequest;</li>\n          <li></li>\n          <li>@JsonProperty(\"bv\")</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n\n<p>This flag is used by the Contact Discovery Service when reading the DynamoDB table of accounts here to decide if the Account should be included in the discovery service</p>\n<aside class=\"onebox githubblob\" data-onebox-src=\"https://github.com/signalapp/ContactDiscoveryService-Icelake/blob/6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java#L265\">\n  <header class=\"source\">\n\n      <a href=\"https://github.com/signalapp/ContactDiscoveryService-Icelake/blob/6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java#L265\" target=\"_blank\" rel=\"noopener\">github.com</a>\n  </header>\n\n  <article class=\"onebox-body\">\n    <h4><a href=\"https://github.com/signalapp/ContactDiscoveryService-Icelake/blob/6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java#L265\" target=\"_blank\" rel=\"noopener\">signalapp/ContactDiscoveryService-Icelake/blob/6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java#L265</a></h4>\n\n\n\n    <pre class=\"onebox\"><code class=\"lang-java\">\n      <ol class=\"start lines\" start=\"255\" style=\"counter-reset: li-counter 254 ;\">\n          <li> * &lt;br&gt;</li>\n          <li> * Note: should only be used for the initial directory load, when there is no point in sending a deletion entry,</li>\n          <li> * as the entry does not exist</li>\n          <li> */</li>\n          <li>@Nullable</li>\n          <li>private static DirectoryEntry directoryInsertEntryFromItem(final Map&lt;String, AttributeValue&gt; item) {</li>\n          <li>  final long e164 = e164FromString(item.get(ATTR_ACCOUNT_E164).s());</li>\n          <li>  final boolean canonicallyDiscoverable = item.containsKey(ATTR_CANONICALLY_DISCOVERABLE) &amp;&amp;</li>\n          <li>      item.get(ATTR_CANONICALLY_DISCOVERABLE).bool();</li>\n          <li></li>\n          <li class=\"selected\">  if (canonicallyDiscoverable) {</li>\n          <li>    final byte[] aci = item.get(KEY_ACCOUNT_UUID).b().asByteArray();</li>\n          <li>    final byte[] pni = item.get(ATTR_PNI).b().asByteArray();</li>\n          <li>    final byte[] uak = item.containsKey(ATTR_UAK) &amp;&amp; item.get(ATTR_UAK).b() != null ?</li>\n          <li>        item.get(ATTR_UAK).b().asByteArray() : null;</li>\n          <li></li>\n          <li>    return new DirectoryEntry(e164, aci, pni, uak);</li>\n          <li>  } else {</li>\n          <li>    return null;</li>\n          <li>  }</li>\n          <li>}</li>\n      </ol>\n    </code></pre>\n\n\n\n  </article>\n\n  <div class=\"onebox-metadata\">\n    \n    \n  </div>\n\n  <div style=\"clear: both\"></div>\n</aside>\n",
        "post_number": 8,
        "post_type": 1,
        "posts_count": 6,
        "updated_at": "2025-01-11T22:31:03.885Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 1,
        "reads": 40,
        "readers_count": 39,
        "score": 73.0,
        "yours": false,
        "topic_id": 65447,
        "topic_slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
        "display_username": "kara",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java#L389",
            "internal": false,
            "reflection": false,
            "title": "Signal-Server/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java at d3d68c2a602a0190d29002289500c93087372cc6 ¬∑ signalapp/Signal-Server ¬∑ GitHub",
            "clicks": 2
          },
          {
            "url": "https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L101",
            "internal": false,
            "reflection": false,
            "title": "Signal-Server/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java at d3d68c2a602a0190d29002289500c93087372cc6 ¬∑ signalapp/Signal-Server ¬∑ GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L47",
            "internal": false,
            "reflection": false,
            "title": "Signal-Server/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java at d3d68c2a602a0190d29002289500c93087372cc6 ¬∑ signalapp/Signal-Server ¬∑ GitHub",
            "clicks": 1
          },
          {
            "url": "https://github.com/signalapp/ContactDiscoveryService-Icelake/blob/6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java#L265",
            "internal": false,
            "reflection": false,
            "title": "ContactDiscoveryService-Icelake/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java at 6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8 ¬∑ signalapp/ContactDiscoveryService-Icelake ¬∑ GitHub",
            "clicks": 1
          },
          {
            "url": "https://community.signalusers.org/t/usernames-in-signal/9157/1614",
            "internal": true,
            "reflection": true,
            "title": "Usernames in Signal",
            "clicks": 0
          }
        ],
        "read": true,
        "user_title": "",
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 4
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 8599,
        "hidden": false,
        "trust_level": 2,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena/65447/8",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true
      }
    ],
    "stream": [
      257169,
      257174,
      257175,
      257177,
      257182,
      258688
    ]
  },
  "timeline_lookup": [
    [
      1,
      428
    ],
    [
      6,
      399
    ]
  ],
  "suggested_topics": [
    {
      "fancy_title": "How does attachment backfill work?",
      "id": 69783,
      "title": "How does attachment backfill work?",
      "slug": "how-does-attachment-backfill-work",
      "posts_count": 5,
      "reply_count": 2,
      "highest_post_number": 5,
      "image_url": null,
      "created_at": "2025-06-17T05:29:02.307Z",
      "last_posted_at": "2025-06-29T03:25:45.303Z",
      "bumped": true,
      "bumped_at": "2025-06-29T03:25:45.303Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags_descriptions": {},
      "like_count": 12,
      "views": 152,
      "category_id": 15,
      "featured_link": null,
      "op_like_count": 1,
      "has_accepted_answer": true,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 1255,
            "username": "mrandr01d",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/m/f08c70/{size}.png",
            "trust_level": 2
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster, Accepted Answer",
          "user": {
            "id": 1534,
            "username": "greyson-signal",
            "name": "Greyson Parrelli",
            "avatar_template": "/user_avatar/community.signalusers.org/greyson-signal/{size}/2005_2.png",
            "primary_group_name": "signal_staff",
            "flair_name": "signal_staff",
            "flair_url": "/uploads/db3609/original/3X/0/6/064a72b694359c38b577ec83488ad474c77032dc.png",
            "flair_bg_color": "3B45FD",
            "flair_group_id": 46,
            "admin": true,
            "moderator": true,
            "trust_level": 4
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 2521,
            "username": "Herohtar",
            "name": "",
            "avatar_template": "/user_avatar/community.signalusers.org/herohtar/{size}/43780_2.png",
            "primary_group_name": "volunteer_moderators",
            "flair_name": "volunteer_moderators",
            "flair_url": "shield-halved",
            "flair_bg_color": "1d8663",
            "flair_color": "fff",
            "flair_group_id": 41,
            "moderator": true,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "Translated emoji names on desktop",
      "id": 69156,
      "title": "Translated emoji names on desktop",
      "slug": "translated-emoji-names-on-desktop",
      "posts_count": 4,
      "reply_count": 6,
      "highest_post_number": 9,
      "image_url": null,
      "created_at": "2025-05-14T18:32:02.418Z",
      "last_posted_at": "2025-05-30T10:23:23.085Z",
      "bumped": true,
      "bumped_at": "2025-05-30T10:23:23.085Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags_descriptions": {},
      "like_count": 4,
      "views": 107,
      "category_id": 15,
      "featured_link": null,
      "op_like_count": 1,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 32896,
            "username": "E2EE4EVER",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/e/d9b06d/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 18285,
            "username": "rassilon1963",
            "name": "Talya (she/her)",
            "avatar_template": "/user_avatar/community.signalusers.org/rassilon1963/{size}/31625_2.png",
            "primary_group_name": "top_contributors",
            "flair_name": "top_contributors",
            "flair_url": "compass",
            "flair_bg_color": "6058CA",
            "flair_color": "fff",
            "flair_group_id": 48,
            "trust_level": 4
          }
        }
      ]
    },
    {
      "fancy_title": "License for sound effects",
      "id": 67718,
      "title": "License for sound effects",
      "slug": "license-for-sound-effects",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2025-03-15T15:50:36.499Z",
      "last_posted_at": "2025-03-15T16:51:29.685Z",
      "bumped": true,
      "bumped_at": "2025-03-15T16:51:29.685Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags_descriptions": {},
      "like_count": 3,
      "views": 89,
      "category_id": 15,
      "featured_link": null,
      "op_like_count": 0,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 32167,
            "username": "eevee303",
            "name": null,
            "avatar_template": "/user_avatar/community.signalusers.org/eevee303/{size}/51210_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 7657,
            "username": "Avitus",
            "name": "üëäüá∫üá∏üî•",
            "avatar_template": "/user_avatar/community.signalusers.org/avitus/{size}/34172_2.png",
            "trust_level": 3
          }
        }
      ]
    }
  ],
  "tags_descriptions": {},
  "fancy_title": "Could the UUID of a contact be used to resolve their phone number with a subpoena?",
  "id": 65447,
  "title": "Could the UUID of a contact be used to resolve their phone number with a subpoena?",
  "posts_count": 6,
  "created_at": "2024-12-13T14:47:48.279Z",
  "views": 300,
  "reply_count": 0,
  "like_count": 11,
  "last_posted_at": "2025-01-11T22:31:03.885Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "could-the-uuid-of-a-contact-be-used-to-resolve-their-phone-number-with-a-subpoena",
  "category_id": 15,
  "word_count": 940,
  "deleted_at": null,
  "user_id": 31027,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_65447",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 8,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 3,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "accepted_answer": {
    "post_number": 6,
    "username": "kara42",
    "name": "kara",
    "excerpt": "<p><a class=\"mention\" href=\"/u/mistake\">@mistake</a> you are right, after being deleted the username should be useless. But if you already looked up the ACI using the username and your device gets compromised, the attacker will learn the ACI. And that would be enough for Signal (if forced) to find out your PNI/phone number.</p>"
  },
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 8599,
        "username": "kara42",
        "name": "kara",
        "avatar_template": "/letter_avatar_proxy/v4/letter/k/7993a0/{size}.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      },
      {
        "id": 31027,
        "username": "mistake",
        "name": "",
        "avatar_template": "/letter_avatar_proxy/v4/letter/m/a9a28c/{size}.png",
        "post_count": 2,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 0
      },
      {
        "id": 16653,
        "username": "QuickBanana",
        "name": null,
        "avatar_template": "/user_avatar/community.signalusers.org/quickbanana/{size}/35290_2.png",
        "post_count": 1,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 2
      }
    ],
    "created_by": {
      "id": 31027,
      "username": "mistake",
      "name": "",
      "avatar_template": "/letter_avatar_proxy/v4/letter/m/a9a28c/{size}.png"
    },
    "last_poster": {
      "id": 8599,
      "username": "kara42",
      "name": "kara",
      "avatar_template": "/letter_avatar_proxy/v4/letter/k/7993a0/{size}.png"
    },
    "links": [
      {
        "url": "https://github.com/tbvdm/sigtop",
        "title": "GitHub - tbvdm/sigtop: Export messages from Signal Desktop",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 3,
        "user_id": 31027,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java#L389",
        "title": "Signal-Server/service/src/main/java/org/whispersystems/textsecuregcm/controllers/AccountController.java at d3d68c2a602a0190d29002289500c93087372cc6 ¬∑ signalapp/Signal-Server ¬∑ GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 8599,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/signalapp/ContactDiscoveryService-Icelake/blob/6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java#L265",
        "title": "ContactDiscoveryService-Icelake/src/main/java/org/signal/cdsi/account/aws/DynamoDbAccountPopulator.java at 6a97ddbc2b7dc4d50051cfbf97328d541c37bbe8 ¬∑ signalapp/ContactDiscoveryService-Icelake ¬∑ GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 8599,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://signal.org/bigbrother/",
        "title": "Signal >> Government Communication",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 31027,
        "domain": "signal.org",
        "root_domain": "signal.org"
      },
      {
        "url": "https://web.archive.org/web/20240408134149/https://theintercept.com/2024/03/04/signal-app-username-phone-number-privacy/",
        "title": "New Signal Usernames Help Stymie Subpoenas, Data Priavacy",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 31027,
        "domain": "web.archive.org",
        "root_domain": "archive.org"
      },
      {
        "url": "https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L47",
        "title": "Signal-Server/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java at d3d68c2a602a0190d29002289500c93087372cc6 ¬∑ signalapp/Signal-Server ¬∑ GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 8599,
        "domain": "github.com",
        "root_domain": "github.com"
      },
      {
        "url": "https://github.com/signalapp/Signal-Server/blob/d3d68c2a602a0190d29002289500c93087372cc6/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java#L101",
        "title": "Signal-Server/service/src/main/java/org/whispersystems/textsecuregcm/storage/Account.java at d3d68c2a602a0190d29002289500c93087372cc6 ¬∑ signalapp/Signal-Server ¬∑ GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 1,
        "user_id": 8599,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}