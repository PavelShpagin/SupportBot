{
  "post_stream": {
    "posts": [
      {
        "id": 271959,
        "name": "",
        "username": "Bopva",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png",
        "created_at": "2025-07-13T17:20:59.330Z",
        "cooked": "<p>Hi,<br>\nI don’t have a github account, so hopefully somebody on the forums can help out.</p>\n<p>Since last night (12-07-2025) Signal Desktop won’t start due to an SQLite “memory out of error” message in the logs. This is happening on NixOS using version “7.59.0”. There haven’t been any changes to the installed programs on the system (see the last system changes below)</p>\n<pre><code class=\"lang-auto\">$ sudo nix-env --list-generations\n   3   2025-06-27 21:09:07   \n   4   2025-07-07 15:26:12   (current)\n</code></pre>\n<p>The desktop is KDE 6 (so <code>kwallet6</code> for storing keys) andthe password hasn’t changed.</p>\n<p>Here are the logs.</p>\n<details>\n<summary>\nLogs</summary>\n<pre><code class=\"lang-auto\">{\"level\":30,\"time\":\"2025-07-13T16:50:47.604Z\",\"msg\":\"getSQLKey: decrypting key\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:47.605Z\",\"msg\":\"getSystemTraySetting got value DoNotUseSystemTray\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:47.605Z\",\"msg\":\"getSystemTraySetting returning DoNotUseSystemTray\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:47.607Z\",\"msg\":\"app ready\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:47.607Z\",\"msg\":\"starting version 7.59.0\"}\n2025-07-13 18:50:47.921: ERROR CORE sqlcipher_page_cipher: hmac check failed for pgno=1\n2025-07-13 18:50:47.921: ERROR CORE sqlite3Codec: error decrypting page 1 data: 1\n2025-07-13 18:50:47.921: ERROR CORE sqlcipher_codec_ctx_set_error 1\n2025-07-13 18:50:47.922: ERROR CORE sqlcipher_cipher_ctx_key_derive: error 1 occurred from provider kdf generating encryption key\n2025-07-13 18:50:47.922: ERROR CORE sqlcipher_codec_key_derive: error occurred deriving read_ctx key\n{\"level\":30,\"time\":\"2025-07-13T16:50:47.922Z\",\"msg\":\"MainSQL: migrateDatabase: Migration without cipher change failed\"}\n2025-07-13 18:50:47.922: ERROR CORE sqlite3Codec: error occurred during key derivation: 1\n2025-07-13 18:50:47.922: ERROR CORE sqlcipher_codec_ctx_set_error 1\n{\"level\":50,\"time\":\"2025-07-13T16:50:47.923Z\",\"msg\":\"MainSQL: Database startup error: Error: sqlite error(7): out of memory\\n    at Statement.get ([REDACTED]/node_modules/@signalapp/sqlcipher/dist/index.cjs:90:26)\\n    at Database.pragma ([REDACTED]/node_modules/@signalapp/sqlcipher/dist/index.cjs:263:20)\\n    at getUserVersion ([REDACTED]/ts/sql/util.js:150:13)\\n    at migrateSchemaVersion ([REDACTED]/ts/sql/Server.js:425:54)\\n    at openAndMigrateDatabase ([REDACTED]/ts/sql/Server.js:457:5)\\n    at openAndSetUpSQLCipher ([REDACTED]/ts/sql/Server.js:479:14)\\n    at initialize ([REDACTED]/ts/sql/Server.js:522:10)\\n    at onMessage ([REDACTED]/ts/sql/mainWorker.js:31:41)\\n    at MessagePort.&lt;anonymous&gt; ([REDACTED]/ts/sql/mainWorker.js:115:33)\\n    at [nodejs.internal.kHybridDispatch] (node:internal/event_target:827:20)\"}\n{\"level\":50,\"time\":\"2025-07-13T16:50:47.923Z\",\"msg\":\"Failed to get zoom factor {\\\"name\\\":\\\"Error\\\"}\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:48.225Z\",\"msg\":\"Updating BrowserWindow config: %s {\\\"maximized\\\":false,\\\"autoHideMenuBar\\\":true,\\\"fullscreen\\\":false,\\\"width\\\":1920,\\\"height\\\":1044,\\\"x\\\":0,\\\"y\\\":0}\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:48.227Z\",\"msg\":\"config/set: Saving ephemeral config to disk\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:48.246Z\",\"msg\":\"config/set: Saved ephemeral config to disk\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:48.455Z\",\"msg\":\"got fast theme-setting value system\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:49.012Z\",\"msg\":\"Updating BrowserWindow config: %s {\\\"maximized\\\":true,\\\"autoHideMenuBar\\\":true,\\\"fullscreen\\\":false,\\\"width\\\":1920,\\\"height\\\":1044,\\\"x\\\":1920,\\\"y\\\":36}\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:49.013Z\",\"msg\":\"config/set: Saving ephemeral config to disk\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:49.031Z\",\"msg\":\"config/set: Saved ephemeral config to disk\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:49.451Z\",\"msg\":\"main window webContents did-finish-load\"}\n{\"level\":30,\"time\":\"2025-07-13T16:50:49.452Z\",\"msg\":\"showing main window\"}\n{\"level\":50,\"time\":\"2025-07-13T16:50:49.452Z\",\"msg\":\"sql.initialize was unsuccessful; returning early\"}\n</code></pre>\n</details>\n<p>I do have 64GB of memory, so that shouldn’t be a problem. Also, I have more than enough hard drive space (500GB for <code>/home/</code>).</p>\n<p>Is there some way to increase the available memory to signal? I tried <code>signal-desktop --no-sandbox</code>, but nothing changed.</p>\n<p>And is there a way to open the <code>db.sqlite</code> without using signal? <code>sqlitebrowser</code> is installed, but I’m unable to find the corresponding key in the keychain wallet.</p>",
        "post_number": 1,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-07-13T17:20:59.330Z",
        "reply_count": 0,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 2,
        "reads": 29,
        "readers_count": 28,
        "score": 15.8,
        "yours": false,
        "topic_id": 70405,
        "topic_slug": "sqlite-memory-out-of-error",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 33358,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/sqlite-memory-out-of-error/70405/1",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true,
        "can_vote": false
      },
      {
        "id": 272203,
        "name": "",
        "username": "Bopva",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png",
        "created_at": "2025-07-17T20:35:15.594Z",
        "cooked": "<p>So, this seems related to the number of messages that are in the database. I have another account with less messages and it works fine. The one that failed has probably thousands of messages, but I was hoping that wouldn’t be a problem.</p>\n<p>It would be great if the signal developers caught this error and tried augmenting the allowed memory.</p>\n<hr>\n<p>Edit, so I started following the <a href=\"https://github.com/signalapp/Signal-Desktop/issues/6970#issuecomment-2650568715\" rel=\"noopener nofollow ugc\">guide in the github issue</a> and it seems like the encryption key was messed with.</p>\n<pre><code class=\"lang-auto\">&gt; safeStorage.decryptString(encryptedKey);\nUncaught:\nError: Error while decrypting the ciphertext provided to safeStorage.decryptString.\n</code></pre>\n<p>Not sure what happened, but I am running Chromium and it possible overwrote that key. It might be that signal isn’t giving its key a unique name and that this key is shared across multiple electron programs or chromium itself, and if it’s changed, that messes up Signal too.</p>\n<p>I have to confirm. Luckily, I think I have a backup of my keystore.</p>\n<hr>\n<p>Edit: There was one password change but unfortunately, the key still can’t be decrypted <img src=\"https://community.signalusers.org/images/emoji/apple/confused.png?v=12\" title=\":confused:\" class=\"emoji\" alt=\":confused:\" loading=\"lazy\" width=\"20\" height=\"20\">  No idea what’s going on. The encrypted key didn’t change, only somehow the key as confirmed by copying the old wallet and running <code>kwallet-query -f 'Chromium Keys' -r \"Chromium Safe Storage\"  kdewallet</code>.</p>\n<p>A little frustrating</p>",
        "post_number": 2,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-07-17T21:53:14.091Z",
        "reply_count": 1,
        "reply_to_post_number": null,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 21,
        "readers_count": 20,
        "score": 9.2,
        "yours": false,
        "topic_id": 70405,
        "topic_slug": "sqlite-memory-out-of-error",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 4,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "link_counts": [
          {
            "url": "https://github.com/signalapp/Signal-Desktop/issues/6970#issuecomment-2650568715",
            "internal": false,
            "reflection": false,
            "title": "Database Error prevents Signal-Desktop to start · Issue #6970 · signalapp/Signal-Desktop · GitHub",
            "clicks": 2
          }
        ],
        "read": true,
        "user_title": null,
        "bookmarked": false,
        "actions_summary": [],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 33358,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/sqlite-memory-out-of-error/70405/2",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": false,
        "topic_accepted_answer": true
      },
      {
        "id": 272379,
        "name": "",
        "username": "Bopva",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png",
        "created_at": "2025-07-22T17:32:08.484Z",
        "cooked": "<p>Alright, I solved this. The key <strong>did</strong> change and I’m not sure why. “All” I had to do was go through my backups and find the old password, then insert it into my current wallet → <img src=\"https://community.signalusers.org/images/emoji/apple/tada.png?v=15\" title=\":tada:\" class=\"emoji\" alt=\":tada:\" loading=\"lazy\" width=\"20\" height=\"20\">  success <img src=\"https://community.signalusers.org/images/emoji/apple/tada.png?v=15\" title=\":tada:\" class=\"emoji\" alt=\":tada:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Most likely it was Chromium itself that changed the password. It would be great if the devs could change the name (and maybe folder) of the password entry so that it can’t be overwritten by Chromium or another electron app. That password should <strong>not</strong> be shared across applications.</p>\n<p>I don’t know how to ping the devs to make them aware of this, but hopefully somebody who stumbles upon this will know that the solution <em>could</em> be going through the backups and finding the old password / key. Which does remind me</p>\n<h1><a name=\"p-272379-backup-your-stuff-folks-1\" class=\"anchor\" href=\"#p-272379-backup-your-stuff-folks-1\" aria-label=\"Heading link\"></a>Backup your stuff folks!</h1>",
        "post_number": 3,
        "post_type": 1,
        "posts_count": 3,
        "updated_at": "2025-07-22T17:32:08.484Z",
        "reply_count": 0,
        "reply_to_post_number": 2,
        "quote_count": 0,
        "incoming_link_count": 0,
        "reads": 15,
        "readers_count": 14,
        "score": 33.0,
        "yours": false,
        "topic_id": 70405,
        "topic_slug": "sqlite-memory-out-of-error",
        "display_username": "",
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_bg_color": null,
        "flair_color": null,
        "flair_group_id": null,
        "badges_granted": [],
        "version": 1,
        "can_edit": false,
        "can_delete": false,
        "can_recover": false,
        "can_see_hidden_post": false,
        "can_wiki": false,
        "read": true,
        "user_title": null,
        "reply_to_user": {
          "id": 33358,
          "username": "Bopva",
          "name": "",
          "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png"
        },
        "bookmarked": false,
        "actions_summary": [
          {
            "id": 2,
            "count": 2
          }
        ],
        "moderator": false,
        "admin": false,
        "staff": false,
        "user_id": 33358,
        "hidden": false,
        "trust_level": 1,
        "deleted_at": null,
        "user_deleted": false,
        "edit_reason": null,
        "can_view_edit_history": true,
        "wiki": false,
        "post_url": "/t/sqlite-memory-out-of-error/70405/3",
        "can_accept_answer": false,
        "can_unaccept_answer": false,
        "accepted_answer": true,
        "topic_accepted_answer": true
      }
    ],
    "stream": [
      271959,
      272203,
      272379
    ]
  },
  "timeline_lookup": [
    [
      1,
      216
    ],
    [
      2,
      212
    ],
    [
      3,
      207
    ]
  ],
  "suggested_topics": [
    {
      "fancy_title": "Mixed-up contactslist in desktop version",
      "id": 69946,
      "title": "Mixed-up contactslist in desktop version",
      "slug": "mixed-up-contactslist-in-desktop-version",
      "posts_count": 1,
      "reply_count": 0,
      "highest_post_number": 1,
      "image_url": null,
      "created_at": "2025-06-24T00:54:09.758Z",
      "last_posted_at": "2025-06-24T00:54:09.810Z",
      "bumped": true,
      "bumped_at": "2025-06-24T00:54:09.810Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags_descriptions": {},
      "like_count": 0,
      "views": 24,
      "category_id": 12,
      "featured_link": null,
      "op_like_count": 0,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": "latest single",
          "description": "Original Poster, Most Recent Poster",
          "user": {
            "id": 33264,
            "username": "Jobtendoeschate",
            "name": "Job ten Doeschate",
            "avatar_template": "/letter_avatar_proxy/v4/letter/j/edb3f5/{size}.png",
            "trust_level": 0
          }
        }
      ]
    },
    {
      "fancy_title": "Video call image too narrow",
      "id": 69933,
      "title": "Video call image too narrow",
      "slug": "video-call-image-too-narrow",
      "posts_count": 8,
      "reply_count": 3,
      "highest_post_number": 8,
      "image_url": null,
      "created_at": "2025-06-23T11:19:35.595Z",
      "last_posted_at": "2025-06-25T09:34:33.136Z",
      "bumped": true,
      "bumped_at": "2025-06-25T09:34:33.136Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags_descriptions": {},
      "like_count": 2,
      "views": 78,
      "category_id": 12,
      "featured_link": null,
      "op_like_count": 1,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 17704,
            "username": "xerces8",
            "name": "David Balažic",
            "avatar_template": "/user_avatar/community.signalusers.org/xerces8/{size}/17201_2.png",
            "trust_level": 1
          }
        },
        {
          "extras": null,
          "description": "Frequent Poster",
          "user": {
            "id": 32986,
            "username": "agent86",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/a/49beb7/{size}.png",
            "trust_level": 1
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 31811,
            "username": "desert_nip",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/d/ccd318/{size}.png",
            "trust_level": 2
          }
        }
      ]
    },
    {
      "fancy_title": "Video Calls on Desktop",
      "id": 68333,
      "title": "Video Calls on Desktop",
      "slug": "video-calls-on-desktop",
      "posts_count": 2,
      "reply_count": 0,
      "highest_post_number": 2,
      "image_url": null,
      "created_at": "2025-04-07T14:55:49.819Z",
      "last_posted_at": "2025-04-07T16:20:13.561Z",
      "bumped": true,
      "bumped_at": "2025-04-07T16:20:13.561Z",
      "archetype": "regular",
      "unseen": false,
      "pinned": false,
      "unpinned": null,
      "visible": true,
      "closed": false,
      "archived": false,
      "bookmarked": null,
      "liked": null,
      "tags_descriptions": {},
      "like_count": 1,
      "views": 74,
      "category_id": 12,
      "featured_link": null,
      "op_like_count": 0,
      "has_accepted_answer": false,
      "posters": [
        {
          "extras": null,
          "description": "Original Poster",
          "user": {
            "id": 32486,
            "username": "Pedro_Tama",
            "name": "Pedro Tama",
            "avatar_template": "/user_avatar/community.signalusers.org/pedro_tama/{size}/51677_2.png",
            "trust_level": 0
          }
        },
        {
          "extras": "latest",
          "description": "Most Recent Poster",
          "user": {
            "id": 5448,
            "username": "DirkPitt1",
            "name": "",
            "avatar_template": "/letter_avatar_proxy/v4/letter/d/74df32/{size}.png",
            "trust_level": 3
          }
        }
      ]
    }
  ],
  "tags_descriptions": {},
  "fancy_title": "SQLite memory out of error",
  "id": 70405,
  "title": "SQLite memory out of error",
  "posts_count": 3,
  "created_at": "2025-07-13T17:20:59.274Z",
  "views": 94,
  "reply_count": 1,
  "like_count": 2,
  "last_posted_at": "2025-07-22T17:32:08.484Z",
  "visible": true,
  "closed": false,
  "archived": false,
  "has_summary": false,
  "archetype": "regular",
  "slug": "sqlite-memory-out-of-error",
  "category_id": 12,
  "word_count": 1063,
  "deleted_at": null,
  "user_id": 33358,
  "featured_link": null,
  "pinned_globally": false,
  "pinned_at": null,
  "pinned_until": null,
  "image_url": null,
  "slow_mode_seconds": 0,
  "draft": null,
  "draft_key": "topic_70405",
  "draft_sequence": null,
  "unpinned": null,
  "pinned": false,
  "current_post_number": 1,
  "highest_post_number": 3,
  "deleted_by": null,
  "actions_summary": [
    {
      "id": 4,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 8,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 10,
      "count": 0,
      "hidden": false,
      "can_act": false
    },
    {
      "id": 7,
      "count": 0,
      "hidden": false,
      "can_act": false
    }
  ],
  "chunk_size": 20,
  "bookmarked": false,
  "topic_timer": null,
  "message_bus_last_id": 0,
  "participant_count": 1,
  "show_read_indicator": false,
  "thumbnails": null,
  "slow_mode_enabled_until": null,
  "accepted_answer": {
    "post_number": 3,
    "username": "Bopva",
    "name": "",
    "excerpt": "<p>Alright, I solved this. The key <strong>did</strong> change and I’m not sure why. “All” I had to do was go through my backups and find the old password, then insert it into my current wallet → <img src=\"https://community.signalusers.org/images/emoji/apple/tada.png?v=15\" title=\":tada:\" class=\"emoji\" alt=\":tada:\" loading=\"lazy\" width=\"20\" height=\"20\">  success <img src=\"https://community.signalusers.org/images/emoji/apple/tada.png?v=15\" title=\":tada:\" class=\"emoji\" alt=\":tada:\" loading=\"lazy\" width=\"20\" height=\"20\"></p>\n<p>Most likely it was Chromium itself that changed the password. It would be great if the devs could change the name (and maybe folder) of the password entry so that it can’t be overwritten by Chromium or another electron app. That password should <strong>not</strong> be shared across applications.</p>\n<p>I don’t know how to ping the devs to make them aware of this, but hopefully somebody who stumbles upon this will know that the solution <em>could</em> be going through the backups and finding the old password / key. Which does remind me</p>\n<h1><a name=\"p-272379-backup-your-stuff-folks-1\" class=\"anchor\" href=\"#p-272379-backup-your-stuff-folks-1\" aria-label=\"Heading link\"></a>Backup your stuff folks!</h1>"
  },
  "can_vote": false,
  "vote_count": 0,
  "user_voted": false,
  "discourse_zendesk_plugin_zendesk_id": null,
  "discourse_zendesk_plugin_zendesk_url": "https://your-url.zendesk.com/agent/tickets/",
  "details": {
    "can_edit": false,
    "notification_level": 1,
    "participants": [
      {
        "id": 33358,
        "username": "Bopva",
        "name": "",
        "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png",
        "post_count": 3,
        "primary_group_name": null,
        "flair_name": null,
        "flair_url": null,
        "flair_color": null,
        "flair_bg_color": null,
        "flair_group_id": null,
        "trust_level": 1
      }
    ],
    "created_by": {
      "id": 33358,
      "username": "Bopva",
      "name": "",
      "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png"
    },
    "last_poster": {
      "id": 33358,
      "username": "Bopva",
      "name": "",
      "avatar_template": "/letter_avatar_proxy/v4/letter/b/57b2e6/{size}.png"
    },
    "links": [
      {
        "url": "https://github.com/signalapp/Signal-Desktop/issues/6970#issuecomment-2650568715",
        "title": "Database Error prevents Signal-Desktop to start · Issue #6970 · signalapp/Signal-Desktop · GitHub",
        "internal": false,
        "attachment": false,
        "reflection": false,
        "clicks": 2,
        "user_id": 33358,
        "domain": "github.com",
        "root_domain": "github.com"
      }
    ]
  },
  "bookmarks": []
}